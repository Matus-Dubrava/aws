-   [API gateway](#api-gateway)
    -   [features](#features)
    -   [CORS](#cors)
    -   [monitoring](#monitoring)

# API gateway

-   API gateway is a fully managed service that makes it easy for developers to publish, maintain, monitor, and secure APIs **at any scale**

    -   together with AWS Lambda, API gateway forms the app-facing part of the AWS serverless infrastructure

-   API gateway handles all of the tasks involved in accepting and processing **up to hundreds of thousands of concurrent API calls**, including traffic management, authorization and access control, monitoring, and API version management

-   with a few clicks in the AWS console, you can create an API that acts as a **front door** for applications to access data, business logic, or functionality from your back-end service

    -   such as applications running on EC2, code running on AWS Lambda, or any web applications (public or private)

-   API gateway has no minimum fees or startup costs
-   you pay only for the API calls you receive and the amount of data transferred out

**resources**

-   the fundamental concepts in any RESTful API is the _resource_

    -   a resource is a logical entity that an app can access through a resource path

-   a resource is an object with a type, associated data, rlationships to other resources, and a set of methods that operate on it

-   API gateway API is a collection of resources and methods that are integrated with backend HTTP endpoints, Lambda functions, or other AWS services; the collection can be deployed in one or more stages

-   permissions to invoke a method are granted using IAM roles and policies or API gateway custom authorizers; an API can present a certificate to be authenticated by the backend
-   typically, API resources are organized in a resource tree according to the application logic

    -   each API resource can expose one or more API methods that must have unique HTTP verbs supported by API gateway

-   with Amazon API gatewayy, you can provide your clients with a consistent and scalable programming interface to access three types of endpoints in the backend

    -   invoking AWS lambda functions
    -   calling other AWS services
    -   accessing an HTTP website or webpage

-   to do this, you create an API gateway API to integrate each API method with a backend endpoint
    -   each backend endpoint is associated with an integration type
        -   _aws, aws proxy, http, http proxy_

**HTTP endpoints**

-   all of the APIs created with API gateway expose HTTPS endpoints only
    -   API gateway does not support unencrypted (HTTP) endpoints
-   by default, API gateway assigns an interal domain to the API that automatically uses the API gateway certificate
    -   when configuring your API to run under a custom domain name, you can provide your own certificate for the domain
-   API methods are invoked through frontend HTTP endpoints that you can associate with a registered custom domain name. In API gateway, a REST API is a group of resources and methods, or _endpoints_

## features

-   robust, secure, and scalable access to backend API and Hosts **multiple versions** and **release stages** of your APIs
-   create and distribute **API keys** to developers
-   use of **AWS Sig-v5** to authorize access to APIs
-   **throttle** and monitor requests to protect your backend

-   manage **cache** to store API responses
-   **SDK Generation** for iOS, Android, and Javascipt
-   reduced latency and distributed denial of service protection through the use of CloudFront
-   request/response data transformation and API mocking
-   swagger support

### resiliency

-   **through trottling**, API gateway helps you manage traffic to your back-end systems via throttling rules that are based on the number of requests per second, for each HTTP method (GET, PUT..) in your APIs

-   **throttling is used to protect the backend systems and applications from traffic spikes**
-   API gateway provides trhottling at multiple levels including global and by service call
-   throttling limits can be set for standard rates and bursts
    -   for example, API owner can set a rate limit of 1000 requests per second for a specific method in their REST APIs, and also configure API gateway to handle a burst of 2000 requests per second for a few seconds
-   API gateway tracks the number of requests per second
    -   aby requests over the limit will receive a 429 HTTP response
    -   the client SDKs generated by API gateway retry calls automatically when met with this response

### caching

-   you can set up a cache with customizable keys and **time-to-live (TTL)** in seconds for your API data to avoid hitting your back-end services for each request

    -   enhanced response times and reduces load on backend services

-   you can add caching to API call responses by provisioning an API gateway cache and specifying its size in GBs (chargeable based on cache size)
-   the cache is provisioned for a specific stage of your APIs
-   this improves performance and reduces the traffic sent to your backend
-   cache settings allow you to control the way the cache key is built and the **time to live (TTL) of the data stored for each method**
-   API gateway also exposes management APIs that help you invalidate the cache for each stage
-   **by default**, API gateway does not set any cache on your API methods

### scaling

-   API gateway handles any level of traffic received by an API, so you are free to focus on your business logic and services rather than maintaining infrastructure

-   API gateway does not arbitrarily limit or throttle invocations to your backend operations and all requests that are not intercepted by throttling and caching settings in API gateway console are sent to your backend operations

### SDK generation

-   API gateway can generate client SDKs for a number of platforms, which can be used to quickly test new APIs from the applications and distribute SDKs to third-party developers
-   the generated SDKs handle API keys and sign requests using AWS credentials
-   API gateway can generate client SDKs for JavaScript, iOS, and Android

### data types used with API gateway

-   APIs built on API gateway can accept any payload sent over HTTP
-   typical data formats inclide JSON, XML, query string parameters, and request headers
-   you can declare any content type for your API's response, and then use the transform template to change the back-end response into your desired format

## CORS

-   when your API's resources receive request from a domain other than the API's own domain, you must enable CORS for selected methods on the resource
    -   CORS is simply allowing the sharing of resources between different domains
-   the method (example HTTP GET, PUT...) for which you will enable CORS must be available in API gateway API before you enable CORS
-   if you do not enable CORS, and an API resource receives request from another domain, the request will be blocked, and the requester/client will receive an error

## monitoring

-   **monitoring through API gateway dashboard**
    -   aftee an API is deployed and in use, API Gateway provides you with a REST API dashboard to visually monitor calls to the services
    -   API gateway also meters utilization by thirs-party developers, the data is available in the API gateway console and through the APIs
-   **monitoring through CloudWatch**

    -   the API gateway logs (near real time) backedn performance metrics such as API calls, latency, and error rates to AWS CloudWatch in your account
        -   this allow for the set up of custom CloudWatch alarms on API gateway APIs

-   **AWS CloudTrail with API gateway**
    -   API gateway is integrated with CloudTrail to give a full auditable history of the changes to your REST APIs
    -   all API calls made to the API gateway APIs to create, modify, delete, or deploy REST APIs are logged to CloudTrail in your account
